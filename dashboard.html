<!DOCTYPE html>
<html lang="en">
<head>
<script>!function(){var a="serlf_auth";try{var b=JSON.parse(localStorage.getItem(a));if(!b||!b.expires||b.expires<Date.now()){localStorage.removeItem(a);window.location.href="login.html"}}catch(e){window.location.href="login.html"}}();</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>serlf.org ‚Äî Captain Community Dashboard</title>
<style>
:root { --bg: #060610; --surface: #0c0c1a; --surface2: #12122a; --border: #1a1a3e; --text: #e8e8f0; --muted: #6b6b8d; --green: #34d399; --cyan: #22d3ee; --accent: #f59e0b; --accent2: #f97316; --red: #ef4444; --yellow: #f59e0b; }
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: var(--bg); color: var(--text); font-family: 'Inter', -apple-system, system-ui, sans-serif; line-height: 1.6; min-height: 100vh; }

/* Navigation */
nav { padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); backdrop-filter: blur(10px); background: rgba(6,6,16,0.9); position: sticky; top: 0; z-index: 100; }
.nav-logo { font-size: 1.3rem; font-weight: 800; letter-spacing: -1px; background: linear-gradient(135deg, var(--accent), var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-decoration: none; }
.nav-links { display: flex; gap: 1.5rem; align-items: center; }
.nav-links a { color: var(--muted); font-size: 0.85rem; font-weight: 500; text-decoration: none; transition: color 0.3s; }
.nav-links a:hover { color: var(--text); }
.nav-badge { background: rgba(245,158,11,0.15); color: var(--accent); padding: 3px 10px; border-radius: 12px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
.captain-badge { display: flex; align-items: center; gap: 0.5rem; background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.2); padding: 4px 12px; border-radius: 16px; font-size: 0.8rem; }

/* Hero Section */
.hero { padding: 4rem 2rem; text-align: center; background: linear-gradient(135deg, rgba(245,158,11,0.05), rgba(6,6,16,0.95)); position: relative; overflow: hidden; }
.hero::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 30% 20%, rgba(245,158,11,0.1), transparent 50%), radial-gradient(circle at 70% 80%, rgba(245,158,11,0.05), transparent 50%); }
.hero-content { position: relative; z-index: 2; max-width: 800px; margin: 0 auto; }
.captain-icon { font-size: 4rem; margin-bottom: 1rem; filter: drop-shadow(0 4px 20px rgba(245,158,11,0.3)); }
.hero h1 { font-size: 2.5rem; font-weight: 900; margin-bottom: 1rem; }
.hero h1 .community { background: linear-gradient(135deg, var(--accent), var(--accent2)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.hero p { font-size: 1.1rem; color: var(--muted); margin-bottom: 2rem; max-width: 600px; margin-left: auto; margin-right: auto; }
.hero-stats { display: flex; justify-content: center; gap: 2rem; margin-top: 2rem; }
.hero-stat { text-align: center; }
.hero-stat-num { font-size: 1.8rem; font-weight: 900; color: var(--accent); }
.hero-stat-label { font-size: 0.8rem; color: var(--muted); margin-top: 0.25rem; }

/* Glass Cards */
.card { background: rgba(12,12,26,0.6); border: 1px solid var(--border); border-radius: 16px; backdrop-filter: blur(10px); transition: all 0.3s ease; }
.card:hover { border-color: rgba(245,158,11,0.3); transform: translateY(-2px); box-shadow: 0 8px 32px rgba(245,158,11,0.1); }

/* Main Grid */
.main-grid { max-width: 1200px; margin: -2rem auto 0; padding: 0 2rem 4rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; position: relative; z-index: 3; }

/* Community Tools */
.community-tools .card-header { display: flex; align-items: center; gap: 1rem; padding: 1.5rem 1.5rem 1rem; border-bottom: 1px solid var(--border); }
.community-tools .card-icon { font-size: 2rem; }
.community-tools .card-title { font-size: 1.2rem; font-weight: 700; color: var(--accent); }
.tool-list { padding: 1.5rem; }
.tool-item { display: flex; align-items: center; gap: 1rem; padding: 0.75rem; border-radius: 10px; cursor: pointer; transition: all 0.2s; margin-bottom: 0.5rem; }
.tool-item:hover { background: rgba(245,158,11,0.1); }
.tool-icon { font-size: 1.3rem; width: 32px; text-align: center; }
.tool-info { flex: 1; }
.tool-name { font-weight: 600; font-size: 0.95rem; }
.tool-desc { font-size: 0.8rem; color: var(--muted); }
.tool-status { font-size: 0.75rem; padding: 2px 8px; border-radius: 8px; }
.status-live { background: rgba(52,211,153,0.15); color: var(--green); }
.status-beta { background: rgba(245,158,11,0.15); color: var(--accent); }
.status-soon { background: rgba(107,107,141,0.15); color: var(--muted); }

/* Sites Integration */
.sites-hub { padding: 1.5rem; }
.sites-header { display: flex; align-items: center; justify-content: between; gap: 1rem; margin-bottom: 1.5rem; }
.sites-title { font-size: 1.2rem; font-weight: 700; color: var(--accent); }
.sites-btn { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: #060610; padding: 0.5rem 1rem; border-radius: 8px; font-size: 0.8rem; font-weight: 700; text-decoration: none; transition: transform 0.2s; }
.sites-btn:hover { transform: translateY(-1px); }
.site-preview { background: var(--surface2); border: 1px solid var(--border); border-radius: 12px; padding: 1rem; margin-bottom: 1rem; }
.site-preview-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.5rem; }
.site-url { font-family: monospace; font-size: 0.9rem; color: var(--accent); }
.site-status { width: 8px; height: 8px; border-radius: 50%; background: var(--green); }
.site-desc { font-size: 0.85rem; color: var(--muted); }

/* Open Source */
.open-source { padding: 1.5rem; }
.open-source .card-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
.repo-list { display: flex; flex-direction: column; gap: 0.75rem; }
.repo-item { display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--surface2); border: 1px solid var(--border); border-radius: 10px; transition: all 0.2s; }
.repo-item:hover { border-color: var(--accent); }
.repo-icon { font-size: 1.5rem; }
.repo-info { flex: 1; }
.repo-name { font-weight: 600; font-size: 0.95rem; }
.repo-desc { font-size: 0.8rem; color: var(--muted); }
.repo-stats { display: flex; gap: 1rem; font-size: 0.75rem; color: var(--muted); margin-top: 0.25rem; }

/* Activity Feed */
.activity-feed { padding: 1.5rem; }
.activity-item { display: flex; gap: 1rem; padding: 1rem 0; border-bottom: 1px solid var(--border); }
.activity-item:last-child { border: none; }
.activity-avatar { width: 32px; height: 32px; border-radius: 50%; background: var(--surface2); display: flex; align-items: center; justify-content: center; font-size: 1rem; }
.activity-content { flex: 1; }
.activity-text { font-size: 0.9rem; margin-bottom: 0.25rem; }
.activity-time { font-size: 0.75rem; color: var(--muted); }

/* Billing */
.billing { padding: 1.5rem; }
.billing-plan { display: flex; align-items: center; justify-content: between; gap: 1rem; padding: 1rem; background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.2); border-radius: 10px; margin-bottom: 1rem; }
.billing-price { font-size: 1.5rem; font-weight: 900; color: var(--accent); }
.billing-desc { font-size: 0.8rem; color: var(--muted); }
.billing-btn { background: var(--accent); color: #060610; padding: 0.5rem 1rem; border-radius: 6px; font-size: 0.8rem; font-weight: 600; text-decoration: none; }

/* Quick Actions */
.quick-actions { padding: 1.5rem; }
.action-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
.action-btn { display: flex; flex-direction: column; align-items: center; gap: 0.5rem; padding: 1rem; background: var(--surface2); border: 1px solid var(--border); border-radius: 10px; cursor: pointer; transition: all 0.2s; text-decoration: none; color: var(--text); }
.action-btn:hover { border-color: var(--accent); background: rgba(245,158,11,0.05); }
.action-icon { font-size: 1.5rem; }
.action-label { font-size: 0.85rem; font-weight: 600; }

/* Mobile Responsive */
@media (max-width: 768px) {
  .hero { padding: 3rem 1.5rem; }
  .hero h1 { font-size: 2rem; }
  .hero-stats { flex-direction: column; gap: 1rem; }
  .main-grid { grid-template-columns: 1fr; padding: 0 1rem 2rem; }
  nav { padding: 1rem; }
  .action-grid { grid-template-columns: 1fr; }
}

/* Animations */
@keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.card { animation: fadeIn 0.6s ease-out; }
.card:nth-child(1) { animation-delay: 0.1s; }
.card:nth-child(2) { animation-delay: 0.2s; }
.card:nth-child(3) { animation-delay: 0.3s; }
.card:nth-child(4) { animation-delay: 0.4s; }
.card:nth-child(5) { animation-delay: 0.5s; }
.card:nth-child(6) { animation-delay: 0.6s; }
</style>
</head>
<body>

<nav>
  <a href="#" class="nav-logo">serlf.org</a>
  <div class="nav-links">
    <div class="captain-badge">ü§ù Captain Community</div>
    <a href="https://serlf.com/platform">Platform</a>
    <a href="https://serlf.com/sites">Sites</a>
    <a href="#" onclick="signOut()">Sign Out</a>
  </div>
</nav>

<div class="hero">
  <div class="hero-content">
    <div class="captain-icon">ü§ù</div>
    <h1>Welcome to the <span class="community">Community</span></h1>
    <p>Open source, community building, collective good. This is where builders connect, newcomers find their voice, and everyone gets a chance to contribute.</p>
    <div class="hero-stats">
      <div class="hero-stat">
        <div class="hero-stat-num">1,247</div>
        <div class="hero-stat-label">Community Members</div>
      </div>
      <div class="hero-stat">
        <div class="hero-stat-num">89</div>
        <div class="hero-stat-label">Open Source Projects</div>
      </div>
      <div class="hero-stat">
        <div class="hero-stat-num">156</div>
        <div class="hero-stat-label">Sites Built</div>
      </div>
    </div>
  </div>
</div>

<div class="main-grid">

  <!-- Community Tools -->
  <div class="card community-tools">
    <div class="card-header">
      <div class="card-icon">üõ†Ô∏è</div>
      <div class="card-title">Community Tools</div>
    </div>
    <div class="tool-list">
      <div class="tool-item" onclick="window.open('https://serlf.org/forums', '_blank')">
        <div class="tool-icon">üí¨</div>
        <div class="tool-info">
          <div class="tool-name">Forums</div>
          <div class="tool-desc">Discussion, Q&A, knowledge sharing</div>
        </div>
        <div class="tool-status status-live">LIVE</div>
      </div>
      <div class="tool-item" onclick="window.open('https://serlf.org/kb', '_blank')">
        <div class="tool-icon">üìö</div>
        <div class="tool-info">
          <div class="tool-name">Knowledge Base</div>
          <div class="tool-desc">Tutorials, guides, best practices</div>
        </div>
        <div class="tool-status status-live">LIVE</div>
      </div>
      <div class="tool-item" onclick="window.open('https://serlf.org/events', '_blank')">
        <div class="tool-icon">üìÖ</div>
        <div class="tool-info">
          <div class="tool-name">Events & Meetups</div>
          <div class="tool-desc">Workshops, hackathons, networking</div>
        </div>
        <div class="tool-status status-beta">BETA</div>
      </div>
      <div class="tool-item">
        <div class="tool-icon">ü§ù</div>
        <div class="tool-info">
          <div class="tool-name">Mentorship</div>
          <div class="tool-desc">Connect newcomers with experts</div>
        </div>
        <div class="tool-status status-soon">SOON</div>
      </div>
    </div>
  </div>

  <!-- Sites Integration -->
  <div class="card sites-hub">
    <div class="sites-header">
      <div>
        <div class="sites-title">üåê Your Sites</div>
        <p style="font-size:0.85rem;color:var(--muted);margin-top:0.25rem;">Build and showcase community projects</p>
      </div>
      <a href="https://serlf.com/sites" class="sites-btn">Create Site</a>
    </div>
    <div class="site-preview">
      <div class="site-preview-header">
        <div class="site-status"></div>
        <div class="site-url">community-showcase.serlf.com</div>
      </div>
      <div class="site-desc">Your community project showcase - featuring top open source contributions and member spotlights.</div>
    </div>
    <div class="site-preview">
      <div class="site-preview-header">
        <div class="site-status"></div>
        <div class="site-url">newcomer-guide.serlf.com</div>
      </div>
      <div class="site-desc">Getting started guide for new community members - onboarding, resources, first contributions.</div>
    </div>
  </div>

  <!-- Open Source Projects -->
  <div class="card open-source">
    <div class="card-header">
      <div class="card-icon">üîì</div>
      <div class="card-title">Open Source Hub</div>
    </div>
    <div class="repo-list">
      <div class="repo-item">
        <div class="repo-icon">‚ö°</div>
        <div class="repo-info">
          <div class="repo-name">serlf-community-toolkit</div>
          <div class="repo-desc">Essential tools and templates for community builders</div>
          <div class="repo-stats">
            <span>‚≠ê 89</span>
            <span>üç¥ 23</span>
            <span>üêõ 3 issues</span>
          </div>
        </div>
      </div>
      <div class="repo-item">
        <div class="repo-icon">üåê</div>
        <div class="repo-info">
          <div class="repo-name">serlf-sites-templates</div>
          <div class="repo-desc">Open source website templates for the community</div>
          <div class="repo-stats">
            <span>‚≠ê 156</span>
            <span>üç¥ 47</span>
            <span>üêõ 1 issue</span>
          </div>
        </div>
      </div>
      <div class="repo-item">
        <div class="repo-icon">ü§ñ</div>
        <div class="repo-info">
          <div class="repo-name">captain-community-bot</div>
          <div class="repo-desc">Discord/Slack bot for community management</div>
          <div class="repo-stats">
            <span>‚≠ê 34</span>
            <span>üç¥ 12</span>
            <span>üêõ 0 issues</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Activity Feed -->
  <div class="card activity-feed">
    <div class="card-header">
      <div class="card-icon">üì°</div>
      <div class="card-title">Community Activity</div>
    </div>
    <div class="activity-item">
      <div class="activity-avatar">üöÄ</div>
      <div class="activity-content">
        <div class="activity-text"><strong>Sarah Chen</strong> published a new tutorial: "Building Your First Open Source Contribution"</div>
        <div class="activity-time">2 hours ago</div>
      </div>
    </div>
    <div class="activity-item">
      <div class="activity-avatar">üí°</div>
      <div class="activity-content">
        <div class="activity-text"><strong>Dev Hackathon</strong> registration opens tomorrow - 48 hours of community building</div>
        <div class="activity-time">4 hours ago</div>
      </div>
    </div>
    <div class="activity-item">
      <div class="activity-avatar">üéâ</div>
      <div class="activity-content">
        <div class="activity-text">Welcome 5 new community members! <strong>Marcus, Julia, Ahmed, Lisa, Tom</strong></div>
        <div class="activity-time">6 hours ago</div>
      </div>
    </div>
    <div class="activity-item">
      <div class="activity-avatar">üîß</div>
      <div class="activity-content">
        <div class="activity-text"><strong>Alex Rodriguez</strong> merged 3 PRs in serlf-community-toolkit</div>
        <div class="activity-time">1 day ago</div>
      </div>
    </div>
  </div>

  <!-- Billing -->
  <div class="card billing">
    <div class="card-header">
      <div class="card-icon">üí≥</div>
      <div class="card-title">Community Membership</div>
    </div>
    <div class="billing-plan">
      <div>
        <div class="billing-price">$1<span style="font-size:0.6em;color:var(--muted);font-weight:normal;">/month</span></div>
        <div class="billing-desc">Everyone gets a chance</div>
      </div>
      <a href="#" onclick="manageBilling()" class="billing-btn">Manage</a>
    </div>
    <div style="font-size:0.85rem;color:var(--muted);line-height:1.4;">
      <p><strong>What you get:</strong></p>
      <p>‚úì Full forum access & posting</p>
      <p>‚úì Private project repositories</p>
      <p>‚úì Event registration priority</p>
      <p>‚úì Mentorship program access</p>
      <p>‚úì Custom serlf.com subdomain</p>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="card quick-actions">
    <div class="card-header">
      <div class="card-icon">‚ö°</div>
      <div class="card-title">Quick Actions</div>
    </div>
    <div class="action-grid">
      <a href="https://serlf.org/forums/new" class="action-btn">
        <div class="action-icon">‚úèÔ∏è</div>
        <div class="action-label">Start Discussion</div>
      </a>
      <a href="https://serlf.com/sites" class="action-btn">
        <div class="action-icon">üåê</div>
        <div class="action-label">Create Site</div>
      </a>
      <a href="https://serlf.org/contribute" class="action-btn">
        <div class="action-icon">üîì</div>
        <div class="action-label">Contribute</div>
      </a>
      <a href="https://serlf.org/events" class="action-btn">
        <div class="action-icon">üìÖ</div>
        <div class="action-label">Join Event</div>
      </a>
    </div>
  </div>

</div>

<script>
// Auth check
const auth = JSON.parse(localStorage.getItem('serlf_auth') || '{}');

// Stripe billing integration
function manageBilling() {
  if (window.Stripe && auth.customerId) {
    // Stripe customer portal
    fetch('/api/create-portal-session', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ customerId: auth.customerId })
    })
    .then(res => res.json())
    .then(data => window.location.href = data.url)
    .catch(() => alert('Billing portal unavailable. Contact support.'));
  } else {
    // Fallback - redirect to Stripe checkout
    window.open('https://billing.stripe.com/p/login/test_cN2aGV7P6aHa5A47ss', '_blank');
  }
}

// Community stats (would come from API in production)
function updateStats() {
  const stats = [
    { selector: '.hero-stat-num', values: [1247, 89, 156] }
  ];
  // Animation would go here
}

// Sign out
function signOut() {
  localStorage.removeItem('serlf_auth');
  window.location.href = 'login.html';
}

// Initialize
document.addEventListener('DOMContentLoaded', function() {
  updateStats();
  
  // Animate cards on scroll
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  });

  document.querySelectorAll('.card').forEach(card => {
    observer.observe(card);
  });
});

// Easter egg - konami code for Captain's log
let konamiCode = [];
const expectedCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA'];

document.addEventListener('keydown', function(e) {
  konamiCode.push(e.code);
  if (konamiCode.length > expectedCode.length) {
    konamiCode = konamiCode.slice(-expectedCode.length);
  }
  if (JSON.stringify(konamiCode) === JSON.stringify(expectedCode)) {
    document.body.style.filter = 'hue-rotate(180deg)';
    setTimeout(() => document.body.style.filter = '', 3000);
    console.log('ü§ù Captain Community reporting for duty! The community fleet is strong.');
  }
});
</script>

</body>
</html>